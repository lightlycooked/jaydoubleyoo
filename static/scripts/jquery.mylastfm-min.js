!function($){$.fn.mylastfm=function(a,r){r=$.extend({user:"jdubcreative",limit:"5",type:"recenttracks",key:"fd869a3a97b51892ce73b5f32b9d2167",coverartsize:"large",coverart:!0,nocoverart:"",nowplaying:!1,error:!0},r);return this.each((function(t,i){var s=$(i);if(s.hasClass("media")||s.addClass("media"),"recenttracks"!=r.type)return r.error&&s.html("<p>LastFM feed invalid</p>"),!1;var c="//ws.audioscrobbler.com/2.0/?format=json&method="+"user.getRecentTracks"+"&user="+r.user+"&api_key="+r.key+"&limit="+r.limit+"&nowplaying="+r.nowplaying+" ";$.ajax({type:"GET",url:c,dataType:"json",success:function(t){t?"recenttracks"==r.type&&e(i,a,t.recenttracks.track,r):r.error&&s.html("<p>LastFM information unavailable</p>")},error:function(e){r.error&&s.html("<p>LastFM request failed</p>")}})}))};var e=function(e,a,r,t){var i,s=$(e),c="";if(r){c+='<ul class="media__list">';var l=r.length;l>t.limit&&(l=t.limit);for(var n=1;n<l;n++){var o=r[n],m=o.artist["#text"],d=o.name,v="";if(c+='<li class="media__item">',c+='<div class="media__track">',t.coverart){if(o.image){if("small"==t.coverartsize)var f=0;else if("medium"==t.coverartsize)f=1;else if("large"==t.coverartsize)f=2;else if("extralarge"==t.coverartsize)f=3;""!=(i=o.image[f]["#text"])&&"https://"!=i.substr(0,8)&&(i="https://"+i),v=i}c+='<div class="media__cover"><img src="'+v+'" ></div>'}c+='<div class="media__content">',c+='<h4 class="media__title" >'+d+"</h5>",c+='<p class="media__artist">'+m+"</p>",c+="</div>",c+="</div>",c+="</li>"}c+="</ul>"}else c+="";s.append(c)}}(jQuery);